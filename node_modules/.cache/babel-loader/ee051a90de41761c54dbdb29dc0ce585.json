{"ast":null,"code":"var _jsxFileName = \"D:\\\\Ambisqu\\\\React_Course\\\\Projects\\\\project_2_leifs\\\\src\\\\Storage\\\\AuthContext.js\",\n    _s = $RefreshSig$();\n\nimport react from \"react\";\nimport { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/react.createContext({\n  isLoggedIn: false,\n  username: \"\",\n  validation: \"100\",\n  onLogin: () => {},\n  onLogout: () => {},\n  onSignup: () => {},\n  triggerValidation: () => {}\n});\nexport const AuthContextProvider = props => {\n  _s();\n\n  //setting authentication information\n  const [authInfo, setAuthInfo] = useState({\n    isLoggedIn: localStorage.getItem(\"isLoggedIn\"),\n    username: \"\"\n  }); //getting userlist (username-password pairs) from localStorage \n\n  let userList = JSON.parse(localStorage.getItem(\"userList\"));\n  userList = userList === null ? {\n    \"admin\": {\n      password: \"alipganteng\"\n    }\n  } : { ...userList,\n    \"admin\": {\n      password: \"alipganteng\"\n    }\n  }; //algorithm to find username-password pair on localStorange\n\n  const onLoginHandler = (username, password) => {\n    let userIsFound = false;\n\n    for (let i in userList) {\n      if (i === username) {\n        if (userList[i].password === password) {\n          localStorage.setItem(\"isLoggedIn\", true);\n          setAuthInfo(prevState => {\n            return { ...prevState,\n              isLoggedIn: true,\n              username: username\n            };\n          });\n        } else {\n          setAuthInfo(prevState => {\n            return { ...prevState,\n              validation: \"102\"\n            };\n          });\n        }\n\n        userIsFound = true;\n      }\n    }\n\n    if (!userIsFound) {\n      setAuthInfo(prevState => {\n        return { ...prevState,\n          validation: \"101\"\n        };\n      });\n    }\n  };\n\n  const onLogoutHandler = () => {\n    localStorage.setItem(\"isLoggedIn\", false);\n    localStorage.setItem(\"username\", \"\");\n    setAuthInfo(prevState => {\n      return { ...prevState,\n        isLoggedIn: false\n      };\n    });\n  };\n\n  const triggerValidation = code => {\n    setAuthInfo(prevState => {\n      return { ...prevState,\n        validation: code\n      };\n    });\n  };\n\n  const signupHandler = (username, password) => {\n    if (username in userList) {\n      triggerValidation(\"105\");\n      return;\n    }\n\n    const newUserList = { ...userList\n    };\n    newUserList[username] = {\n      password: password\n    };\n    localStorage.setItem(\"userList\", JSON.stringify(newUserList));\n    onLoginHandler(username, password);\n  };\n\n  useEffect(() => {\n    setAuthInfo({\n      isLoggedIn: localStorage.getItem(\"isLoggedIn\") === \"true\",\n      username: localStorage.getItem(\"username\")\n    });\n    console.log(authInfo.isLoggedIn);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: { ...authInfo,\n      onLogin: (username, password) => {\n        onLoginHandler(username, password);\n      },\n      onLogout: onLogoutHandler,\n      onSignup: (username, password) => {\n        signupHandler(username, password);\n      },\n      triggerValidation: triggerValidation\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AuthContextProvider, \"aEwLUgWmD358gmmNpqnPhgRWens=\");\n\n_c = AuthContextProvider;\nexport default AuthContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"sources":["D:/Ambisqu/React_Course/Projects/project_2_leifs/src/Storage/AuthContext.js"],"names":["react","useEffect","useState","AuthContext","createContext","isLoggedIn","username","validation","onLogin","onLogout","onSignup","triggerValidation","AuthContextProvider","props","authInfo","setAuthInfo","localStorage","getItem","userList","JSON","parse","password","onLoginHandler","userIsFound","i","setItem","prevState","onLogoutHandler","code","signupHandler","newUserList","stringify","console","log","children"],"mappings":"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","sourcesContent":["import react from \"react\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nconst AuthContext = react.createContext({\r\n  isLoggedIn: false,\r\n  username: \"\",\r\n  validation: \"100\",\r\n  onLogin: () => {},\r\n  onLogout: () => {},\r\n  onSignup: () => {},\r\n  triggerValidation: () => {},\r\n});\r\n\r\nexport const AuthContextProvider = (props) => {\r\n\r\n  //setting authentication information\r\n  const [authInfo, setAuthInfo] = useState({\r\n    isLoggedIn: localStorage.getItem(\"isLoggedIn\"),\r\n    username: \"\",\r\n  });\r\n\r\n  //getting userlist (username-password pairs) from localStorage \r\n  let userList = JSON.parse(localStorage.getItem(\"userList\"));\r\n  userList =\r\n    userList === null\r\n      ? {\"admin\" : {password: \"alipganteng\"}}\r\n      : {...userList, \"admin\" : {password: \"alipganteng\" }}\r\n\r\n  //algorithm to find username-password pair on localStorange\r\n  const onLoginHandler = (username, password) => {\r\n    let userIsFound = false;\r\n    for (let i in userList) {\r\n      if (i=== username) {\r\n        if (userList[i].password === password) {\r\n          localStorage.setItem(\"isLoggedIn\", true);\r\n          setAuthInfo((prevState) => {\r\n            return {\r\n              ...prevState,\r\n              isLoggedIn: true,\r\n              username: username\r\n            };\r\n          });\r\n        } else {\r\n          setAuthInfo((prevState) => {\r\n            return {\r\n              ...prevState,\r\n              validation: \"102\",\r\n            };\r\n          });\r\n        }\r\n        userIsFound = true;\r\n      }\r\n    }\r\n    if (!userIsFound) {\r\n      setAuthInfo((prevState) => {\r\n        return {\r\n          ...prevState,\r\n          validation: \"101\",\r\n        };\r\n      });\r\n    }\r\n  };\r\n\r\n  const onLogoutHandler = () => {\r\n    localStorage.setItem(\"isLoggedIn\", false);\r\n    localStorage.setItem(\"username\", \"\");\r\n    setAuthInfo((prevState) => {\r\n      return {\r\n        ...prevState,\r\n        isLoggedIn: false,\r\n      };\r\n    });\r\n  };\r\n\r\n  const triggerValidation = (code) => {\r\n    setAuthInfo((prevState) => {\r\n      return {\r\n        ...prevState,\r\n        validation: code,\r\n      };\r\n    });\r\n  };\r\n\r\n  const signupHandler = (username, password) => {\r\n    if (username in userList) {\r\n      triggerValidation(\"105\")\r\n      return\r\n    }\r\n    const newUserList = {\r\n      ...userList,\r\n    };\r\n    newUserList[username] = {password:password}\r\n\r\n    localStorage.setItem(\"userList\",JSON.stringify(newUserList));\r\n    onLoginHandler(username, password)\r\n  };\r\n\r\n  useEffect(() => {\r\n    setAuthInfo({\r\n      isLoggedIn: localStorage.getItem(\"isLoggedIn\") === \"true\",\r\n      username: localStorage.getItem(\"username\")\r\n    });\r\n    console.log(authInfo.isLoggedIn)\r\n  }, []);\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        ...authInfo,\r\n        onLogin: (username, password) => {\r\n          onLoginHandler(username, password);\r\n        },\r\n        onLogout: onLogoutHandler,\r\n        onSignup: (username, password) => {\r\n          signupHandler(username, password);\r\n        },\r\n        triggerValidation: triggerValidation,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthContext;\r\n"]},"metadata":{},"sourceType":"module"}