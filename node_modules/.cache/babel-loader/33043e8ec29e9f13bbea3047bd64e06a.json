{"ast":null,"code":"var _jsxFileName = \"D:\\\\Ambisqu\\\\React_Course\\\\Projects\\\\project_2_leifs\\\\src\\\\Contexts\\\\AuthContext.js\",\n    _s = $RefreshSig$();\n\nimport react from \"react\";\nimport { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/react.createContext({\n  isLoggedIn: false,\n  username: \"\",\n  validation: \"\",\n  onLogin: () => {},\n  onLogout: () => {},\n  onSignup: () => {}\n});\nexport const AuthContextProvider = props => {\n  _s();\n\n  const [authInfo, setAuthInfo] = useState({\n    isLoggedIn: true,\n    username: \"\"\n  });\n  const userList = JSON.parse(localStorage.getItem(\"userList\"));\n\n  const onLoginHandler = (username, password) => {\n    for (let user in userList) {\n      if (user.username === username) {\n        if (user.password === password) {\n          localStorage.setItem(\"isLoggedIn\", true);\n          setAuthInfo(prevState => {\n            console.log(prevState);\n            return { ...prevState,\n              isLoggedIn: true\n            };\n          });\n          return;\n        }\n      } else {\n        setAuthInfo({\n          prevState\n        });\n      }\n    }\n  };\n\n  const onLogoutHandler = () => {\n    localStorage.setItem(\"isLoggedIn\", false);\n    localStorage.setItem(\"username\", \"\");\n    setAuthInfo(prevState => {\n      return { ...prevState,\n        isLoggedIn: false\n      };\n    });\n  };\n\n  const signupHandler = (username, password) => {\n    const newUserList = [...userList, {\n      username: username,\n      password: password\n    }];\n    localStorage.setItem(JSON.stringify(newUserList));\n  };\n\n  useEffect(() => {\n    setAuthInfo({\n      isLoggedIn: localStorage.getItem(\"isLoggedin\"),\n      username: localStorage.getItem(\"username\")\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: { ...authInfo,\n      onLogin: (username, password) => {\n        onLoginHandler(username, password);\n      },\n      onLogout: onLogoutHandler,\n      onSignup: (username, password) => {\n        signupHandler(username, password);\n      }\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AuthContextProvider, \"q1peRsR3Ebr89T9ETwsYO4wvs3o=\");\n\n_c = AuthContextProvider;\nexport default AuthContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"sources":["D:/Ambisqu/React_Course/Projects/project_2_leifs/src/Contexts/AuthContext.js"],"names":["react","useEffect","useState","AuthContext","createContext","isLoggedIn","username","validation","onLogin","onLogout","onSignup","AuthContextProvider","props","authInfo","setAuthInfo","userList","JSON","parse","localStorage","getItem","onLoginHandler","password","user","setItem","prevState","console","log","onLogoutHandler","signupHandler","newUserList","stringify","children"],"mappings":"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","sourcesContent":["import react from \"react\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nconst AuthContext = react.createContext({\r\n  isLoggedIn: false,\r\n  username: \"\",\r\n  validation: \"\",\r\n  onLogin: () => {},\r\n  onLogout: () => {},\r\n  onSignup: () => {},\r\n});\r\n\r\nexport const AuthContextProvider = (props) => {\r\n  const [authInfo, setAuthInfo] = useState({\r\n    isLoggedIn: true,\r\n    username: \"\",\r\n  });\r\n\r\n  const userList = JSON.parse(localStorage.getItem(\"userList\"));\r\n\r\n  const onLoginHandler = (username, password) => {\r\n    for (let user in userList) {\r\n      if (user.username === username) {\r\n        if (user.password === password) {\r\n          localStorage.setItem(\"isLoggedIn\", true);\r\n          setAuthInfo((prevState) => {\r\n            console.log(prevState);\r\n            return {\r\n              ...prevState,\r\n              isLoggedIn: true,\r\n            };\r\n          });\r\n          return\r\n        }\r\n      } else {\r\n        setAuthInfo({prevState})\r\n      }\r\n    }\r\n  };\r\n\r\n  const onLogoutHandler = () => {\r\n    localStorage.setItem(\"isLoggedIn\", false);\r\n    localStorage.setItem(\"username\", \"\");\r\n    setAuthInfo((prevState) => {\r\n      return {\r\n        ...prevState,\r\n        isLoggedIn: false,\r\n      };\r\n    });\r\n  };\r\n\r\n  const signupHandler = (username, password) => {\r\n    const newUserList = [\r\n      ...userList,\r\n      { username: username, password: password },\r\n    ];\r\n    localStorage.setItem(JSON.stringify(newUserList));\r\n  };\r\n\r\n  useEffect(() => {\r\n    setAuthInfo({\r\n      isLoggedIn: localStorage.getItem(\"isLoggedin\"),\r\n      username: localStorage.getItem(\"username\"),\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        ...authInfo,\r\n        onLogin: (username, password) => {\r\n          onLoginHandler(username, password);\r\n        },\r\n        onLogout: onLogoutHandler,\r\n        onSignup: (username, password) => {\r\n          signupHandler(username, password);\r\n        },\r\n      }}\r\n    >\r\n      {props.children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthContext;\r\n"]},"metadata":{},"sourceType":"module"}