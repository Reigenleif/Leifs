{"ast":null,"code":"import _objectSpread from\"D:/Ambisqu/React_Course/Projects/project_2_leifs/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"D:/Ambisqu/React_Course/Projects/project_2_leifs/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"D:/Ambisqu/React_Course/Projects/project_2_leifs/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import react from\"react\";import{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var AuthContext=/*#__PURE__*/react.createContext({isLoggedIn:false,username:\"\",validation:\"100\",onLogin:function onLogin(){},onLogout:function onLogout(){},onSignup:function onSignup(){},triggerValidation:function triggerValidation(){}});export var AuthContextProvider=function AuthContextProvider(props){//setting authentication information\nvar _useState=useState({isLoggedIn:true,username:\"\"}),_useState2=_slicedToArray(_useState,2),authInfo=_useState2[0],setAuthInfo=_useState2[1];//getting userlist (username-password pairs) from localStorage \nvar userList=JSON.parse(localStorage.getItem(\"userList\"));userList=userList===null?[{username:\"admin\",password:\"alipganteng\"}]:[].concat(_toConsumableArray(userList),[{username:\"admin\",password:\"alipganteng\"}]);//algorithm to find username-password pair on localStorange\nvar onLoginHandler=function onLoginHandler(username,password){var userIsFound=false;for(var i in userList){if(userList[i].username===username){if(userList[i].password===password){localStorage.setItem(\"isLoggedIn\",true);setAuthInfo(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isLoggedIn:true});});}else{setAuthInfo(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{validation:\"102\"});});}userIsFound=true;}}if(!userIsFound){setAuthInfo(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{validation:\"101\"});});}};var onLogoutHandler=function onLogoutHandler(){localStorage.setItem(\"isLoggedIn\",false);localStorage.setItem(\"username\",\"\");setAuthInfo(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isLoggedIn:false});});};var triggerValidation=function triggerValidation(code){setAuthInfo(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{validation:code});});};var signupHandler=function signupHandler(username,password){var newUserList=[].concat(_toConsumableArray(userList),[{username:username,password:password}]);localStorage.setItem(\"userList\",JSON.stringify(newUserList));onLoginHandler(username,password);};useEffect(function(){setAuthInfo({isLoggedIn:localStorage.getItem(\"isLoggedIn\")});},[]);return/*#__PURE__*/_jsx(AuthContext.Provider,{value:_objectSpread(_objectSpread({},authInfo),{},{onLogin:function onLogin(username,password){onLoginHandler(username,password);},onLogout:onLogoutHandler,onSignup:function onSignup(username,password){signupHandler(username,password);},triggerValidation:triggerValidation}),children:props.children});};export default AuthContext;","map":{"version":3,"sources":["D:/Ambisqu/React_Course/Projects/project_2_leifs/src/Storage/AuthContext.js"],"names":["react","useEffect","useState","AuthContext","createContext","isLoggedIn","username","validation","onLogin","onLogout","onSignup","triggerValidation","AuthContextProvider","props","authInfo","setAuthInfo","userList","JSON","parse","localStorage","getItem","password","onLoginHandler","userIsFound","i","setItem","prevState","onLogoutHandler","code","signupHandler","newUserList","stringify","children"],"mappings":"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","sourcesContent":["import react from \"react\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nconst AuthContext = react.createContext({\r\n  isLoggedIn: false,\r\n  username: \"\",\r\n  validation: \"100\",\r\n  onLogin: () => {},\r\n  onLogout: () => {},\r\n  onSignup: () => {},\r\n  triggerValidation: () => {},\r\n});\r\n\r\nexport const AuthContextProvider = (props) => {\r\n\r\n  //setting authentication information\r\n  const [authInfo, setAuthInfo] = useState({\r\n    isLoggedIn: true,\r\n    username: \"\",\r\n  });\r\n\r\n  //getting userlist (username-password pairs) from localStorage \r\n  let userList = JSON.parse(localStorage.getItem(\"userList\"));\r\n  userList =\r\n    userList === null\r\n      ? [{ username: \"admin\", password: \"alipganteng\" }]\r\n      : [...userList, { username: \"admin\", password: \"alipganteng\" }];\r\n\r\n  //algorithm to find username-password pair on localStorange\r\n  const onLoginHandler = (username, password) => {\r\n    let userIsFound = false;\r\n    for (let i in userList) {\r\n      if (userList[i].username === username) {\r\n        if (userList[i].password === password) {\r\n          localStorage.setItem(\"isLoggedIn\", true);\r\n          setAuthInfo((prevState) => {\r\n            return {\r\n              ...prevState,\r\n              isLoggedIn: true,\r\n            };\r\n          });\r\n        } else {\r\n          setAuthInfo((prevState) => {\r\n            return {\r\n              ...prevState,\r\n              validation: \"102\",\r\n            };\r\n          });\r\n        }\r\n        userIsFound = true;\r\n      }\r\n    }\r\n    if (!userIsFound) {\r\n      setAuthInfo((prevState) => {\r\n        return {\r\n          ...prevState,\r\n          validation: \"101\",\r\n        };\r\n      });\r\n    }\r\n  };\r\n\r\n  const onLogoutHandler = () => {\r\n    localStorage.setItem(\"isLoggedIn\", false);\r\n    localStorage.setItem(\"username\", \"\");\r\n    setAuthInfo((prevState) => {\r\n      return {\r\n        ...prevState,\r\n        isLoggedIn: false,\r\n      };\r\n    });\r\n  };\r\n\r\n  const triggerValidation = (code) => {\r\n    setAuthInfo((prevState) => {\r\n      return {\r\n        ...prevState,\r\n        validation: code,\r\n      };\r\n    });\r\n  };\r\n\r\n  const signupHandler = (username, password) => {\r\n    const newUserList = [\r\n      ...userList,\r\n      { username: username, password: password },\r\n    ];\r\n    localStorage.setItem(\"userList\",JSON.stringify(newUserList));\r\n    onLoginHandler(username, password)\r\n  };\r\n\r\n  useEffect(() => {\r\n    setAuthInfo({\r\n      isLoggedIn: localStorage.getItem(\"isLoggedIn\"),\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        ...authInfo,\r\n        onLogin: (username, password) => {\r\n          onLoginHandler(username, password);\r\n        },\r\n        onLogout: onLogoutHandler,\r\n        onSignup: (username, password) => {\r\n          signupHandler(username, password);\r\n        },\r\n        triggerValidation: triggerValidation,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthContext;\r\n"]},"metadata":{},"sourceType":"module"}